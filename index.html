<!DOCTYPE html>
<html>
	<head>
		<link rel="stylesheet" href="style.css">
		<title>bullshit job data generator</title>

		<script language="javascript">

			var jsonPath = "bullshit-job-titles.json";

			var getJSON = function(url) {
				return new Promise(function(resolve, reject) {
					var xhr = new XMLHttpRequest();
					xhr.open('get', url, true);
					xhr.responseType = 'json';
					xhr.onload = function() {
						var status = xhr.status;
						if (status == 200) {
							resolve(xhr.response);
						} else {
							reject(status);
						}
					};
					xhr.send();
				});
			};

			// define blendr vars from json
			getJSON(jsonPath).then(function(data) {
				var nbObject = data.results.items.length;

			    // Iterates through the objects
			    for(var i = 0; i < nbObject; i++) {

			    	var nbTitle = data.results.items[i].title;
			    	var nbDesc = data.results.items[i].description;
			    	var nbImageUrl = data.results.items[i].url;
			    }
			});

			function generate() {
				index1 = Math.floor(Math.random() * data.first.length);
				index2 = Math.floor(Math.random() * data.last.length);
				var jobtitle = data.first[index1] + " " + data.last[index2];
				var matches = jobtitle.match(/\b(\w)/g);
				var jobacronym = matches.join('');
				document.getElementById("newtitle").innerHTML = jobtitle + " (" + jobacronym + ")";
			}
		</script>
	</head>
	<body>
		<button id="generator" onclick="generate()" class="button">Generate new</button>
		<p id="newtitle"></p>
		<!-- It needs a badge -->
		<script src="https://raw.githubusercontent.com/bullgit/bullgit-badges/master/bullgit-badges.min.js"></script>
	</body>

</html>
